---
title: loop
description: 循环生成（genFor、genForOf、genForIn、genWhile、genDoWhile）
---

本模块提供生成 `for`、`for...of`、`for...in`、`while`、`do...while` 循环的 API。

<Example module="loop" />

<!-- automd:jsdocs src="../../src/loop.ts" -->

## Typescript

### `genDoWhile(statements, cond, options, indent)`

Generate `do { body } while (cond);` or single-statement form.

**Example:**

```js
genDoWhile("step();", "!done");
// ~> `do { step(); } while (!done);`

genDoWhile(["read();", "check();"], "eof");
// ~> `do { read(); check(); } while (eof);`

genDoWhile("next();", "hasMore", { bracket: false });
// ~> `do next(); while (hasMore);`
```

### `genFor(init, test, update, statements, options, indent)`

Generate C-style `for (init; test; update) { body }` or single-statement form.

**Example:**

```js
genFor("let i = 0", "i < n", "i++", "console.log(i);");
// ~> `for (let i = 0; i < n; i++) { console.log(i); }`

genFor("", "true", "", ["doWork();", "if (done) break;"]);
// ~> `for (; true; ) { doWork(); if (done) break; }`

genFor("i = 0", "i < 10", "i++", "sum += i;", { bracket: false });
// ~> `for (i = 0; i < 10; i++) sum += i;`
```

### `genForIn(left, obj, statements, options, indent)`

Generate `for (left in obj) { body }` or single-statement form.

**Example:**

```js
genForIn("const key", "obj", "console.log(key, obj[key]);");
// ~> `for (const key in obj) { console.log(key, obj[key]); }`

genForIn("const k", "o", ["sum += o[k];"]);
// ~> `for (const k in o) { sum += o[k]; }`

genForIn("let p", "obj", "visit(p);", { bracket: false });
// ~> `for (let p in obj) visit(p);`
```

### `genForOf(left, iterable, statements, options, indent)`

Generate `for (left of iterable) { body }` or single-statement form.

**Example:**

```js
genForOf("const x", "items", "console.log(x);");
// ~> `for (const x of items) { console.log(x); }`

genForOf("let [k, v]", "Object.entries(obj)", ["process(k, v);"]);
// ~> `for (let [k, v] of Object.entries(obj)) { process(k, v); }`

genForOf("const item", "list", "yield item;", { bracket: false });
// ~> `for (const item of list) yield item;`
```

### `genWhile(cond, statements, options, indent)`

Generate `while (cond) { body }` or single-statement form.

**Example:**

```js
genWhile("running", "step();");
// ~> `while (running) { step(); }`

genWhile("i > 0", ["process();", "i--;"]);
// ~> `while (i > 0) { process(); i--; }`

genWhile("ok", "doIt();", { bracket: false });
// ~> `while (ok) doIt();`
```

<!-- /automd -->